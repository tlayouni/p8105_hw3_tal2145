p8105\_hw3\_tal2145
================
Troy Layouni
2019-10-08

**Loading packages**

``` r
library(tidyverse)
```

    ## ── Attaching packages ──────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ─────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(ggridges)
```

    ## 
    ## Attaching package: 'ggridges'

    ## The following object is masked from 'package:ggplot2':
    ## 
    ##     scale_discrete_manual

## Problem 1

**Problem 1, Part 1: Loading Instacart data**

``` r
library(p8105.datasets)
data("instacart")
```

**Problem 1, Part 2: Number of aisles and the aisle with the most items
ordered**

``` r
instacart_aisles = 
  instacart %>% 
  group_by(aisle) %>% 
  summarize(n = n()) %>% 
  arrange(desc(n)) 

instacart_aisles
```

    ## # A tibble: 134 x 2
    ##    aisle                              n
    ##    <chr>                          <int>
    ##  1 fresh vegetables              150609
    ##  2 fresh fruits                  150473
    ##  3 packaged vegetables fruits     78493
    ##  4 yogurt                         55240
    ##  5 packaged cheese                41699
    ##  6 water seltzer sparkling water  36617
    ##  7 milk                           32644
    ##  8 chips pretzels                 31269
    ##  9 soy lactosefree                26240
    ## 10 bread                          23635
    ## # … with 124 more rows

There are 134 aisles in the instacart dataset and the aisle that the
most items are ordered from is the fresh vegetables.

**Problem 1, Part 3: Plotting the number of items ordered in each aisle,
limited to aisles with more than 10,000 items ordered**

``` r
instacart_aisles %>% 
  filter(n > 10000) %>% 
  
ggplot(aes(x = aisle, y = n)) +
  geom_col() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1)) +
  labs(
   title = "Number of Items Ordered by Aisle",
   x = "Aisle",
   y = "Number of Items Ordered",
   caption = "Data from Instacart"
  ) 
```

![](p8105_hw3_tal2145_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->

**Problem 1, Part 4: Creating a table to show the 3 most popular items
from each table**

``` r
  instacart %>% 
  group_by(aisle, product_name) %>% 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  summarize(n = n()) %>%
  top_n(n = 3) %>% 
  arrange(desc(n)) %>% 
  knitr::kable(caption = "3 Most Popular Items by Aisle")
```

    ## Selecting by n

| aisle                      | product\_name                                 |    n |
| :------------------------- | :-------------------------------------------- | ---: |
| packaged vegetables fruits | Organic Baby Spinach                          | 9784 |
| packaged vegetables fruits | Organic Raspberries                           | 5546 |
| packaged vegetables fruits | Organic Blueberries                           | 4966 |
| baking ingredients         | Light Brown Sugar                             |  499 |
| baking ingredients         | Pure Baking Soda                              |  387 |
| baking ingredients         | Cane Sugar                                    |  336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |   30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |   28 |
| dog food care              | Small Dog Biscuits                            |   26 |

3 Most Popular Items by Aisle

**Problem 1, Part 5: Creating a table for the mean hour of the day that
both Pink Lady Apples and Coffee Ice Cream are ordered each day of the
week **

``` r
instacart %>% 
    mutate(order_dow = recode(order_dow, "0" = "Sunday", "1" = "Monday", "2" = "Tuesday", "3" = "Wednesday", "4" = "Thursday", "5" = "Friday", "6" = "Saturday")) %>% 
  select(product_name, order_hour_of_day, order_dow) %>% 
  group_by(product_name, order_dow) %>%
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
  mutate(mean_hour = round(mean(order_hour_of_day))) %>% 
  select(product_name, order_dow, mean_hour) %>% 
  distinct() %>% 
  pivot_wider(
    names_from = "order_dow",
    values_from = c("mean_hour")) %>% 
  select(product_name, Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday) %>% 
  knitr::kable(caption = "Mean Hour of Day Products are Bought by Day of week")
```

| product\_name    | Sunday | Monday | Tuesday | Wednesday | Thursday | Friday | Saturday |
| :--------------- | -----: | -----: | ------: | --------: | -------: | -----: | -------: |
| Pink Lady Apples |     13 |     11 |      12 |        14 |       12 |     13 |       12 |
| Coffee Ice Cream |     14 |     14 |      15 |        15 |       15 |     12 |       14 |

Mean Hour of Day Products are Bought by Day of week

\#mutate(order\_dow = recode(order\_dow, “0” = “Sunday”, “1” = “Monday”,
“2” = “Tuesday”, “3” = “Wednesday”, “4” = “Thursday”, “5” = “Friday”,
“6” = “Saturday”)) %\>% group\_by(product\_name, order\_dow) %\>%
filter(product\_name %in% c(“Pink Lady Apples”, “Coffee Ice Cream”))
%\>% mutate( mean\_hour = mean(order\_hour\_of\_day)) %\>%
\#mean\_hour\_apple = mean(filter(product\_name %in% “Pink Lady
Apples”), order\_hour\_of\_day), \#mean\_hour\_ice\_cream =
mean(filter(product\_name %in% “Coffee Ice Cream”),
order\_hour\_of\_day) \# ) %\>% select(product\_name, order\_dow,
mean\_hour) %\>% pivot\_wider( names\_from = “order\_dow”, values\_from
= c(“mean\_hour”), values\_fn = list(mean\_hour = list) ) %\>%
